C51 COMPILER V9.52.0.0   LIB_PROJET_T_RESET                                                02/28/2017 09:56:15 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE LIB_PROJET_T_RESET
OBJECT MODULE PLACED IN LIB_PROJET_T_RESET.OBJ
COMPILER INVOKED BY: D:\Programmes\Keil\C51\BIN\C51.EXE LIB_PROJET_T_RESET.c BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          /*---------------------------------------------------------------------------
   2          ;
   3          ;
   4          ;
   5          ;
   6          ;   FILE NAME   : LIB_BSE_Reset
   7          ;   TARGET MCUs : C8051F020, 
   8          ;   DESCRIPTION : Fonctions Bas niveau pour le TP EMBARQUE
   9          ;
  10          ;   REVISION 1.0
  11          ;
  12          ;---------------------------------------------------------------------------*/
  13          //-------------------------------------------------------------------------
  14          // Includes
  15          //------------------------------------------------------------------------------------
  16          #include <c8051f020.h>                    // SFR declarations
  17          #include "LIB_PROJET_T_Reset.h"
  18          
  19          //*****************************************************************************  
  20          //CFG_Reset
  21          //
  22          //   Cette fonction a pour but de regrouper les fonctions de configurations des resets.
  23          // 
  24          //*****************************************************************************
  25          
  26          void CFG_RESET(void)
  27          {
  28   1        Disable_reset_source();
  29   1        Disable_Watchdog();
  30   1      }
  31          //*****************************************************************************  
  32          //Disable_Watchdog
  33          //
  34          //   Cette fonction a pour but de désactiver le watchdog.
  35          // 
  36          //*****************************************************************************
  37          
  38          void Disable_Watchdog(void)
  39          {
  40   1        EA=0;//Desactivation des interruptions 
  41   1        WDTCN=0xDE;
  42   1        WDTCN=0xAD;
  43   1        EA=1;//Reactivation des interruptions
  44   1      }
  45          
  46          //*****************************************************************************  
  47          //Disable_reset_source
  48          //
  49          //   Cette fonction a pour but de desactiver la plupart des sources de reset
  50          // Desactive le reset par : CNVSTR/Comparator0
  51          // Par sécurité on met a 0 les bits de SWRSF et PORSF
  52          //*****************************************************************************
  53          void Disable_reset_source(void)
  54          {
  55   1        Clean_Reset();
C51 COMPILER V9.52.0.0   LIB_PROJET_T_RESET                                                02/28/2017 09:56:15 PAGE 2   

  56   1        Disable_reset_CNVSTR();
  57   1        Disable_reset_Comp0();
  58   1      }
  59          
  60          
  61          //*****************************************************************************  
  62          //Disable_reset_CNVSTR
  63          //
  64          //   Cette fonction a pour but de desactivet le reset par CNVSTR
  65          // Par sécurité on met a 0 les bits de SWRSF et PORSF
  66          // 
  67          //*****************************************************************************
  68          
  69          void Disable_reset_CNVSTR(void)
  70          {
  71   1        Clean_Reset();
  72   1        RSTSRC&=0xBF;
  73   1      }
  74          
  75          //*****************************************************************************  
  76          //Disable_reset_Comp0
  77          //
  78          //   Cette fonction a pour but de desactiver le reset par Comparator0
  79          //   Par sécurité on met a 0 les bits de SWRSF et PORSF
  80          // 
  81          //*****************************************************************************
  82          
  83          void Disable_reset_Comp0(void)
  84          {
  85   1        Clean_Reset();
  86   1        RSTSRC&=0xDF;
  87   1      }
  88          //*****************************************************************************  
  89          //Clean_Reset
  90          //
  91          //   Cette fonction a pour but de mettre a zero les bits de SWRSF et PORSF
  92          // 
  93          //*****************************************************************************
  94          
  95          void Clean_Reset(void)
  96          {
  97   1        RSTSRC&=0XED;//Force SWRSF et PORSF a 0
  98   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     44    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
