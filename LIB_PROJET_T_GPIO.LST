C51 COMPILER V9.52.0.0   LIB_PROJET_T_GPIO                                                 02/28/2017 09:56:15 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE LIB_PROJET_T_GPIO
OBJECT MODULE PLACED IN LIB_PROJET_T_GPIO.OBJ
COMPILER INVOKED BY: D:\Programmes\Keil\C51\BIN\C51.EXE LIB_PROJET_T_GPIO.c BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          /*---------------------------------------------------------------------------
   2          ;
   3          ;
   4          ;
   5          ;
   6          ;   FILE NAME   : LIB_BSE_GPIO
   7          ;   TARGET MCUs : C8051F020, 
   8          ;   DESCRIPTION : Fonctions Bas niveau pour le TP EMBARQUE
   9          ;
  10          ;   REVISION 1.0
  11          ;
  12          ;---------------------------------------------------------------------------*/
  13          //-------------------------------------------------------------------------
  14          // Includes
  15          //------------------------------------------------------------------------------------
  16                            // SFR declarations
  17          #include "LIB_PROJET_T_GPIO.h"
  18          #include <c8051f020.h> 
  19          #include "Declaration_GPIO.h" 
  20          #include <intrins.h>
  21          
  22          //------------------------------------------------------------------------------
  23          
  24          //*****************************************************************************  
  25          //CFG_GPIO
  26          //
  27          //   Cette fonction a pour but de regrouper les fonctions de configurations des GPIOS.
  28          // 
  29          //*****************************************************************************
  30          void CFG_GPIO(void)
  31          {
  32   1        Set_GPIO();
  33   1        
  34   1      }
  35          void Set_GPIO(void)
  36          {
  37   1        Enable_Crossbar();
  38   1        //Output
  39   1        /*P2MDOUT|=0x7D;//P2.0 P2.1 P2.3 P2.4 P2.5 P2.6 en push pull
  40   1        P3MDOUT|=0xFC;//P3.2 P3.3 P3.4 P3.5 P3.6 P3.7 en push pull
  41   1        //INPUT config
  42   1        /*Mise a 1 des entrees pour desactiver le LTransistor du push pull*/
  43   1        P3__0=1;
  44   1        P3__1=1;
  45   1        P2__7=1;
  46   1        P2__2=1;
  47   1        P1__2=1;
  48   1        P0__0=1;
  49   1        P0__1=1;
  50   1        /*Mise en drain ouvert*/
  51   1        P3MDOUT&=0xFC;//P3.1 P3.0 en drain ouvert
  52   1        P2MDOUT&=0x7D;//P2.2 P2.7 en drain ouvert
  53   1        P1MDOUT&=0xFB;//P1.2 en drain ouvert 
  54   1        P0MDOUT&=0xFC;
  55   1        P0MDOUT|=0x01;
C51 COMPILER V9.52.0.0   LIB_PROJET_T_GPIO                                                 02/28/2017 09:56:15 PAGE 2   

  56   1      
  57   1        //Déclarations
  58   1        XBR0|=0x7F;
  59   1        XBR1|=0xFF;
  60   1        XBR2|=0x6D;
  61   1        
  62   1        /*End_Config*/
  63   1        P1MDOUT|=0x08;//Disable if not sysclock
  64   1        
  65   1      
  66   1      }
  67          
  68          void Enable_Crossbar(void)
  69          {
  70   1        XBR2 |=0x40;
  71   1      }
  72          /*
  73          void Pulse_P20(void)
  74          {
  75            P2__0=1;
  76            _nop_();
  77            _nop_();
  78            _nop_();
  79            _nop_();
  80            _nop_();
  81            _nop_();
  82            _nop_();
  83            _nop_();
  84            _nop_();
  85            P2__0=0;
  86          
  87          }
  88          void Pulse_P21(void)
  89          {
  90            P2__1=1;
  91            _nop_();
  92            _nop_();
  93            _nop_();
  94            _nop_();
  95            _nop_();
  96            _nop_();
  97            _nop_();
  98            _nop_();
  99            _nop_();
 100            P2__1=0;
 101          
 102          }
 103          
 104          void SET_Decl_PES(void)
 105          {
 106            P3__3=1;
 107            return;
 108          }
 109          void UNSET_Decl_PES(void)
 110          {
 111            P3__3=0;
 112            return;
 113          }
 114          void Set_Erreur(void)
 115          {
 116            P3__2=0;
 117            return;
C51 COMPILER V9.52.0.0   LIB_PROJET_T_GPIO                                                 02/28/2017 09:56:15 PAGE 3   

 118          }
 119          
 120          char Read_P2_2(void)
 121          {
 122            return P2__2;
 123          }
 124          
 125          void SET_P3_5(void)
 126          {
 127            P3__5=1;
 128          }
 129          void UNSET_P3_5(void)
 130          {
 131            P3__5=0;
 132          }*/


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     52    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
