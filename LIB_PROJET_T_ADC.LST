C51 COMPILER V9.52.0.0   LIB_PROJET_T_ADC                                                  02/28/2017 09:56:15 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE LIB_PROJET_T_ADC
OBJECT MODULE PLACED IN LIB_PROJET_T_ADC.OBJ
COMPILER INVOKED BY: D:\Programmes\Keil\C51\BIN\C51.EXE LIB_PROJET_T_ADC.c BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          /*---------------------------------------------------------------------------
   2          ;
   3          ;
   4          ;
   5          ;
   6          ;   FILE NAME   : LIB_BSE_ADC
   7          ;   TARGET MCUs : C8051F020, 
   8          ;   DESCRIPTION : Fonctions Bas niveau pour le TP EMBARQUE
   9          ;
  10          ;   REVISION 1.0
  11          ;
  12          ;---------------------------------------------------------------------------*/
  13          //-------------------------------------------------------------------------
  14          // Includes
  15          //------------------------------------------------------------------------------------
  16          #include <c8051f020.h>                    // SFR declarations
  17          #include "LIB_PROJET_T_ADC.h" 
  18          //-----------------------------------------------------------------------------
  19          // Function PROTOTYPES
  20          //-----------------------------------------------------------------------------
  21          void CFG_ADC(void)
  22          {
  23   1         CFG_VREF();
  24   1         CFG_ADC0();
  25   1      }
  26          void CFG_VREF(void)
  27          {
  28   1        REF0CN|=0x03; //Activation tension de reference sur le port VREF
  29   1      }
  30          
  31          void CFG_ADC0(void)
  32          {
  33   1        AMX0CF&=0xF8; 
  34   1        AMX0SL=0x03; //On utilise le port AIN0.3,Utilisation AIN0.3 en unipolaire
  35   1        ADC0CN&=0xf3; //Conversion declench?e par une mise a 1 de AD0BUSY
  36   1        AD0TM=0; //Conversion declench?e par une mise a 1 de AD0BUSY
  37   1        AD0LJST=1;
  38   1        AD0EN=1; //Activation ADC0
  39   1        AD0INT=0; //ADC0 pret
  40   1        
  41   1      }
  42          /*void SET_AD0BUSY(void)
  43          {
  44            AD0BUSY=1;
  45          }
  46          char Fin_Conversion(void)
  47          {
  48            return AD0INT;
  49          }
  50          
  51          void CLEAR_ADC_Flag(void)
  52          {
  53            AD0INT=0;
  54          }
  55          //unsigned char ACQ_ADC(void)
C51 COMPILER V9.52.0.0   LIB_PROJET_T_ADC                                                  02/28/2017 09:56:15 PAGE 2   

  56          //{
  57          //  AD0BUSY=1; //lancement conversion
  58          //  while(AD0INT!=1) ;//Attente fin de conversion
  59          //  
  60          //  AD0INT=0;//raz le flag
  61          //  return ADC0H; 
  62          //}*/


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     28    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
